The SpeciesNetClassifier uses a fixed pretrained model with a hardcoded classification layer that outputs logits for all available species classes (e.g., 2,498 classes). Importantly, the presence of a target_species.txt file does not change or retrain the model architecture. Instead, this file is used purely for post-inference filtering to return predictions only for a user-defined subset of species.


When the classifier is initialized, it loads all class labels:

`self.labels = {idx: line.strip() for idx, line in enumerate(fp.readlines())}`

If target_species.txt is provided, it filters that list down to just those species present in the full label set:

`self.target_labels = [
    line.strip()
    for line in fp.readlines()
    if line.strip() in self.labels.values()
]
labels_to_idx = {label: idx for idx, label in self.labels.items()}
self.target_idx = [labels_to_idx[label] for label in self.target_labels]`

During prediction, the model computes logits for all classes:
`logits = self.model(batch_tensor).cpu()`

Then, for result reporting, it extracts the values only for the specified target classes:

"target_logits": [float(logits[0][idx]) for idx in self.target_idx]

